#!/usr/bin/python3

import urllib.request
import subprocess
import readline

def get_title(url):
    webpage = urllib.request.urlopen(url).read()
    title = str(webpage).split("<title>")[1].split("</title>")[0]
    return title


def get_url_from_clipboard():
    p = subprocess.run(["wl-paste", "-n"], capture_output=True, text=True)
    return p.stdout


def rlinput(prompt, prefill=''):
   readline.set_startup_hook(lambda: readline.insert_text(prefill))
   try:
      return input(prompt)
   finally:
      readline.set_startup_hook()


url = get_url_from_clipboard()
title = get_title(url)

rlinput("URL:   ", url)
rlinput("Title: ", title)
desc = input("Enter a description:\n")
